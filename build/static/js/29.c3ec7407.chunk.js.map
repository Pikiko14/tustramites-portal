{"version":3,"sources":["pages/login/login.page.js"],"names":["cookies","Cookies","Login","props","form","Form","useForm","history","useHistory","updateUser","useContext","AuthContext","useEffect","localStorage","clear","queryParams","URLSearchParams","window","location","search","get","set","href","_jsx","className","style","backgroundImage","children","_jsxs","src","layout","onFinish","value","async","HttpClient","post","then","res","data","token","user","role","catch","err","Alert","show","type","title","message","btnOk","fnOk","btnCancel","login","Item","name","id","hasFeedback","rules","required","Input","placeholder","Password","onClick","push","Button","htmlType","process","GoogleIcon","FacebookIcon"],"mappings":"uKAAA,4GAWA,MAAMA,EAAU,IAAIC,IAoJLC,UA/IAC,IACb,MAAQC,GAASC,IAAKC,UAChBC,EAAUC,eACV,WAAEC,GAAeC,qBAAWC,KAoClC,OATAC,qBAAU,KACRC,aAAaC,QACb,MAAMC,EAAc,IAAIC,gBAAgBC,OAAOC,SAASC,QACrDJ,EAAYK,IAAI,WACjBpB,EAAQqB,IAAI,QAASN,EAAYK,IAAI,UACrCH,OAAOC,SAASI,KAAO,IACzB,GACC,IAGDC,cAAA,OACEC,UAAU,QACVC,MAAO,CAAEC,gBAAiB,4CAC1BC,SAEAC,eAAA,OAAKJ,UAAU,gBAAeG,SAAA,CAC5BJ,cAAA,OAAKC,UAAU,eACfI,eAAA,OAAKJ,UAAU,oBAAmBG,SAAA,CAChCC,eAAA,OAAKJ,UAAU,eAAcG,SAAA,CAC3BJ,cAAA,MAAIC,UAAU,QAAOG,SAAC,qBACtBJ,cAAA,OAAKC,UAAU,aAAaK,IAAI,mCAElCD,eAAA,OAAKJ,UAAU,cAAaG,SAAA,CAC1BC,eAACvB,IAAI,CAACyB,OAAO,WAAW1B,KAAMA,EAAM2B,SA3BzBC,IArBPC,iBACWC,IAAWC,KAAK,0BAA2BH,GAC/DI,MAAMC,IACLrC,EAAQqB,IAAI,QAASgB,EAAIC,KAAKC,OAC9B9B,EAAW4B,EAAIC,KAAKE,MACO,YAAvBH,EAAIC,KAAKE,KAAKC,KAAoBxB,OAAOC,SAASI,KAAO,WAE7DL,OAAOC,SAASI,KAAO,GAAG,IAE3BoB,OAAOC,IACNC,IAAMC,KAAK,CACTC,KAAM,QACNC,MAAO,SACPC,QACE,yFACFC,MAAO,UACPC,KAAMA,OACNC,UAAW,YACX,GACF,EAGJC,CAAMpB,EAAM,EA0BsDL,SAAA,CACxDJ,cAAA,OAAKC,UAAU,eAAcG,SAC3BJ,cAAClB,IAAKgD,KAAI,CACRC,KAAK,QACLC,GAAG,QAEHC,aAAW,EACXC,MAAO,CACL,CACEC,UAAU,EACVV,QAAS,+BAEXrB,SAEFJ,cAACoC,IAAK,CAACC,YAAY,8BAGvBrC,cAAA,OAAKC,UAAU,eAAcG,SAC3BJ,cAAClB,IAAKgD,KAAI,CACRC,KAAK,WACLC,GAAG,WAEHC,aAAW,EACXC,MAAO,CACL,CACEC,UAAU,EACVV,QAAS,uCAEXrB,SAEFJ,cAACoC,IAAME,SAAQ,CAACD,YAAY,sBAIhChC,eAAA,KAAGJ,UAAU,WAAUG,SAAA,CAAC,kCAEtBJ,cAAA,KAAGuC,QAASA,IAAMvD,EAAQwD,KAAK,aAAcvC,UAAU,UAASG,SAAC,yBAInEJ,cAAA,OAAKC,UAAU,kBAAiBG,SAC9BJ,cAACyC,IAAM,CAACC,SAAS,SAASzC,UAAU,oBAAmBG,SAAC,0BAK5DC,eAAA,OAAKJ,UAAU,cAAaG,SAAA,CAC1BC,eAAA,OAAKJ,UAAU,mBAAkBG,SAAA,CAC/BJ,cAAA,KAAGC,UAAU,UAAUF,KAAM4C,+CAAmDvC,SAE9EJ,cAAC4C,IAAU,MAEb5C,cAAA,KAAGC,UAAU,UAAUF,KAAM4C,iDAAqDvC,SAMhFJ,cAAC6C,IAAY,SAIjB7C,cAAA,QAAMC,UAAU,OAAMG,SAAC,8DAGzBJ,cAAA,OAAKC,UAAU,aAAYG,SACzBC,eAAA,KAAGJ,UAAU,OAAMG,SAAA,CAAC,+BAElBJ,cAAA,KAAGD,KAAK,YAAYE,UAAU,OAAMG,SAAC,0BAe3CJ,cAAA,gBAGA,C","file":"static/js/29.c3ec7407.chunk.js","sourcesContent":["import { Button, Form, Input } from 'antd'\r\nimport React, { useContext, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Alert from '../../helpers/alert/Alert'\r\nimport HttpClient from '../../helpers/network/HttpClient'\r\n\r\n// CONTEXT\r\nimport AuthContext from '../../context/AuthContext'\r\n\r\n// COOKIE\r\nimport Cookies from 'universal-cookie'\r\nconst cookies = new Cookies()\r\n\r\nimport { FacebookIcon, GoogleIcon } from '../../components/icons/Icons'\r\nimport './scss/login.page.scss'\r\n\r\nconst Login = (props) => {\r\n  const [ form ] = Form.useForm()\r\n  const history = useHistory()\r\n  const { updateUser } = useContext(AuthContext)\r\n\r\n  const login = async (value) => {\r\n    const response = await HttpClient.post('/api/user/login/landing', value)\r\n      .then((res) => {\r\n        cookies.set('token', res.data.token)\r\n        updateUser(res.data.user)\r\n        if (res.data.user.role !== 'CLIENTE') window.location.href = '/general'\r\n        else \r\n        window.location.href = '/'\r\n      })\r\n      .catch((err) => {\r\n        Alert.show({\r\n          type: 'error',\r\n          title: 'Error ',\r\n          message:\r\n            'Correo o contreseña incorrectos. Por favor verifica tus datos e intenta nuevamente.',\r\n          btnOk: 'Aceptar',\r\n          fnOk: () => { },\r\n          btnCancel: 'Cancelar'\r\n        })\r\n      })\r\n  }\r\n  const handleLogin = (value) => {\r\n    login(value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    localStorage.clear()\r\n    const queryParams = new URLSearchParams(window.location.search)\r\n    if(queryParams.get('token')){\r\n      cookies.set('token', queryParams.get('token'))\r\n      window.location.href = '/'\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      className=\"login\"\r\n      style={{ backgroundImage: 'url(/assets/images/background-login.svg)' }}\r\n      // style={{ backgroundColor: '#9F4AF6' }}\r\n    >\r\n      <div className=\"login-content\">\r\n        <div className=\"login-back\" />\r\n        <div className=\"login-sub-content\">\r\n          <div className=\"login-header\">\r\n            <h3 className=\"title\">Inicia Sesión</h3>\r\n            <img className='image-icon' src='/assets/icon/logo-color.svg' />\r\n          </div>\r\n          <div className=\"login-panel\">\r\n            <Form layout=\"vertical\" form={form} onFinish={handleLogin}>\r\n              <div className=\"form-control\">\r\n                <Form.Item\r\n                  name=\"email\"\r\n                  id=\"email\"\r\n                  // label=\"Usuario:\"\r\n                  hasFeedback\r\n                  rules={[\r\n                    {\r\n                      required: true,\r\n                      message: 'Por favor ingresa tu email'\r\n                    }\r\n                  ]}\r\n                >\r\n                  <Input placeholder=\"Correo electrónico\" />\r\n                </Form.Item>\r\n              </div>\r\n              <div className=\"form-control\">\r\n                <Form.Item\r\n                  name=\"password\"\r\n                  id=\"password\"\r\n                  // label=\"Contraseña:\"\r\n                  hasFeedback\r\n                  rules={[\r\n                    {\r\n                      required: true,\r\n                      message: 'Por favor ingresa tu contraseña'\r\n                    }\r\n                  ]}\r\n                >\r\n                  <Input.Password placeholder=\"Contraseña\" />\r\n                </Form.Item>\r\n              </div>\r\n\r\n              <p className=\"subtitle\">\r\n                ¿Olvidaste tu contraseña?\r\n                <a onClick={() => history.push('/remember')} className=\"primary\">\r\n                  Haz click aquí\r\n                </a>\r\n              </p>\r\n              <div className=\"containerButton\">\r\n                <Button htmlType=\"submit\" className=\"form-action-login\">\r\n                  Inicia sesión\r\n                </Button>\r\n              </div>\r\n            </Form>\r\n            <div className=\"content-btn\">\r\n              <div className=\"content-btn-list\">\r\n                <a className=\"btn-goo\" href={process.env.REACT_APP_URL_API + '/api/auth/google'}>\r\n                  {/* <img className=\"icon\" src=\"/assets/icon/google.svg\" alt=\"/assets/icon/google.svg\" /> */}\r\n                  <GoogleIcon />\r\n                </a>\r\n                <a className=\"btn-goo\" href={process.env.REACT_APP_URL_API + '/api/auth/facebook'}>\r\n                  {/* <img\r\n                    className=\"icon\"\r\n                    src=\"/assets/icon/facebook.svg\"\r\n                    alt=\"/assets/icon/facebook.svg\"\r\n                  /> */}\r\n                  <FacebookIcon />\r\n                </a>\r\n\r\n              </div>\r\n              <span className=\"text\">Inicia sesión con tu cuenta de Google y/o Facebook.</span>\r\n            </div>\r\n\r\n            <div className=\"notAccount\">\r\n              <p className=\"text\">\r\n                ¿Aún no tienes cuenta?\r\n                <a href=\"/register\" className=\"link\">\r\n                  Regístrate\r\n                </a>\r\n              </p>\r\n            </div>\r\n\r\n            {/* <div className=\"autor\">\r\n              <p>\r\n                Power By\r\n                <img src=\"/assets/images/tingenio.png\" alt=\"/assets/images/tingenio.png\"></img>\r\n              </p>\r\n              <p>&copy; Todos los derechos reservados.</p>\r\n              <p>Colombia 2021</p>\r\n            </div> */}\r\n          </div>\r\n          <br></br>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n\r\n/* \r\n<p className=\"subtitle\">\r\n                ¿Eres nuevo en tus trámites VIP?\r\n                <a href=\"/register\" className=\"primary\">\r\n                  Registrate\r\n                </a>\r\n              </p> */\r\n"],"sourceRoot":""}