(this["webpackJsonptus-tramites-administrador"]=this["webpackJsonptus-tramites-administrador"]||[]).push([[28],{199:function(e,a,t){"use strict";t(0);var s=t(71),r=t(215),c=t(1);a.a=e=>{let{title:a="Nuevo Tr\xe1mite"}=e;return Object(c.jsxs)("div",{className:"content-add-tramite",children:[Object(c.jsx)("div",{className:"button-nuevo-tramite",children:Object(c.jsxs)("div",{className:"centrarVerHor",children:[Object(c.jsx)(s.q,{}),Object(c.jsx)("span",{children:a})]})}),Object(c.jsx)("div",{className:"input-tramite",children:Object(c.jsx)("div",{className:"notificacion-movil",children:Object(c.jsx)(r.a,{})})})]})}},359:function(e,a,t){},488:function(e,a,t){"use strict";t.r(a);var s=t(0),r=t.n(s),c=t(74),n=t(483),i=t(227),l=t(228),o=t(229),d=t(204),m=t.n(d),j=t(70),u=t(68),b=t(298),h=t(199),p=t(213),O=t(469),x=t(493),f=t(237),g=t(468),v=t(445),N=t(223),y=t(1);var k=e=>{var a;let{open:t,actor:c,setOpen:n,data:i,form:l,setData:o,callback:d,callbackLength:m}=e;const[u,b]=Object(s.useState)([]),h=e=>{var a=i[c.actor._id][e];p(e),d(a),n(!1)},p=e=>{var a={...i};let t=a[c.actor._id]||[];t.splice(e,1),a[c.actor._id]=t,o(a),0===a.length&&n(!1)};return Object(s.useEffect)((()=>{(()=>{var e=[];Object.keys(l).forEach(((a,t)=>{l[a].actors[c.actor.name].checked&&e.push(l[a].input)})),b(e)})()}),[]),Object(y.jsx)(y.Fragment,{children:i&&i[null===c||void 0===c||null===(a=c.actor)||void 0===a?void 0:a._id].length?Object(y.jsx)(y.Fragment,{children:u&&u.length>0&&Object(y.jsx)("div",{style:{width:"100%",maxWidth:"800px",margin:"20px"},children:Object(y.jsx)(v.a,{collapsible:"header",defaultActiveKey:["1"],items:[{key:"1",label:"Personas: "+i[c.actor._id].length,children:Object(y.jsxs)("table",{style:{width:"100%"},children:[Object(y.jsx)("thead",{className:"ant-table-thead",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"ant-table-cell",style:{textAlign:"left"},children:u[0].name}),u[1]&&Object(y.jsx)("th",{className:"ant-table-cell",style:{textAlign:"left"},children:u[1].name}),Object(y.jsx)("th",{width:"10%",className:"ant-table-cell",children:"Acciones"})]})}),Object(y.jsx)("tbody",{className:"ant-table-tbody",children:i?Object(y.jsx)(r.a.Fragment,{children:i[c.actor._id]&&i[c.actor._id].map(((e,a)=>Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"ant-table-cell",children:e[u[0]._id]}),u[1]&&Object(y.jsx)("td",{className:"ant-table-cell",children:e[u[1]._id]}),Object(y.jsxs)("td",{className:"btn-action ant-table-cell",style:{textAlign:"center"},children:[Object(y.jsx)(N.a,{title:"Editar",overlayClassName:"tooltipCustomActor",color:"#8556ee",children:Object(y.jsx)("a",{className:"action-delete",children:Object(y.jsx)(f.a,{onClick:()=>{return e=a,void j.a.show({type:"warning",title:"Editar",message:"\xbfEst\xe1s segur@ que deseas editarlo?",btnOk:"Aceptar",buttonX:!0,fnOk:()=>{h(e)},fnCancel:()=>{}});var e}})})}),Object(y.jsx)(N.a,{title:"Eliminar",overlayClassName:"tooltipCustomActor",color:"#8556ee",children:Object(y.jsx)("a",{className:"action-delete",onClick:()=>{return e=a,void j.a.show({type:"warning",title:"Eliminar",message:"\xbfEst\xe1s segur@ que deseas eliminarlo?",btnOk:"Aceptar",buttonX:!0,fnOk:()=>{p(e)},fnCancel:()=>{}});var e},children:Object(y.jsx)(g.a,{})})})]})]},a)))}):Object(y.jsx)("tr",{})})]})}]})})}):""})},_=t(444);var C=e=>{let{formInput:a,actor:t,iterative:s}=e;return Object(y.jsxs)(y.Fragment,{children:[("text"===a.type||"string"===a.type)&&Object(y.jsx)(n.a.Item,{className:"spaceLabel",label:a.name+":",name:s?a._id:a._id+"_"+t.actor._id,rules:[{required:a.required,message:"No olvides ingresar este dato"},{min:a.minCant,message:"Dato no v\xe1lido, por favor ingr\xe9salo de nuevo"},{max:a.maxCant,message:"Dato no v\xe1lido, por favor ingr\xe9salo de nuevo"}],hasFeedback:!0,children:Object(y.jsx)(_.a,{className:"input-dynamic",type:"text"})}),"number"===a.type&&Object(y.jsx)(n.a.Item,{className:"spaceLabel",label:a.name+":",name:s?a._id:a._id+"_"+t.actor._id,rules:[a.required?{required:a.required,message:"No olvides ingresar este dato"}:null,{min:a.minCant,message:"Dato no v\xe1lido, por favor ingr\xe9salo de nuevo"},{max:a.maxCant,message:"Dato no v\xe1lido, por favor ingr\xe9salo de nuevo"}],hasFeedback:!0,children:Object(y.jsx)(_.a,{className:"input-dynamic",type:"number"})}),"email"===a.type&&Object(y.jsx)(n.a.Item,{className:"spaceLabel",label:a.name+":",name:s?a._id:a._id+"_"+t.actor._id,hasFeedback:!0,rules:[a.required?{required:a.required,message:"No olvides ingresar este dato"}:null,{type:"email",message:"Este correo electr\xf3nico no es v\xe1lido"}],children:Object(y.jsx)(_.a,{className:"input-dynamic",type:"email"})}),"date"===a.type&&Object(y.jsx)(n.a.Item,{className:"spaceLabel",label:a.name+":",name:s?a._id:a._id+"_"+t.actor._id,hasFeedback:!0,rules:[a.required?{required:a.required,message:"No olvides ingresar este dato"}:null],children:Object(y.jsx)(_.a,{className:"input-dynamic",type:"date"})})]})};var q=e=>{let{actor:a,notarialact:t,setActorsIterative:r,actorsIterative:c,iterative:d,flag:m}=e;const[j]=n.a.useForm(),[u,b]=Object(s.useState)(!1),[h,p]=Object(s.useState)(null),f=()=>{let e=j.getFieldsValue(),t={...c},s=t[a.actor._id]||[];s.push(e),t[a.actor._id]=s,r(t),j.resetFields()},g=e=>{var s=new Object;Object.keys(t.form).forEach(((r,c)=>{t.form[r].actors[a.actor.name].checked&&(s[t.form[r].input._id]=e[t.form[r].input._id])})),j.setFieldsValue(s)};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(i.a,{children:Object(y.jsx)(l.a,{span:24,className:"centrar margeTituloActor",children:Object(y.jsx)("h2",{className:"titleIngresarInfo actors",children:a.actor.name})})}),Object(y.jsxs)(n.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:8},autoComplete:"off",form:j,onFinish:f,children:[Object.keys(t.form).map(((e,s)=>Object(y.jsx)(i.a,{className:"",children:t.form[e].actors[a.actor.name].checked&&!t.form[e].input.validation?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(l.a,{span:24,className:"centrar",children:Object(y.jsx)(C,{formInput:t.form[e].input,actor:a,iterative:d})})}):null},s))),Object.keys(t.form).map(((e,s)=>Object(y.jsx)(i.a,{className:"",children:t.form[e].actors[a.actor.name].checked&&t.form[e].input.validation?Object(y.jsxs)(y.Fragment,{children:[m&&Object(y.jsx)(l.a,{span:24,className:"centrar",children:(m=!1,Object(y.jsx)("p",{className:"notaJuridica",children:"Si es una empresa, por favor diligencia los siguientes datos:"}))}),Object(y.jsx)(l.a,{span:24,className:"centrar",children:Object(y.jsx)(C,{formInput:t.form[e].input,actor:a,iterative:d})})]}):null},s))),Object(y.jsx)(x.a,{gap:"middle",align:"center",vertical:!0,children:Object(y.jsx)(k,{open:u,actor:a,setOpen:b,data:c,setData:r,form:t.form,callback:e=>{g(e),p(e)},onFinish:f,callbackLength:()=>{0==c.length&&r(null)}})}),Object(y.jsx)(i.a,{children:Object(y.jsx)(l.a,{span:6,className:"centrar",children:Object(y.jsx)("div",{className:"containerButtons",children:Object(y.jsx)(o.a,{type:"primary",icon:Object(y.jsx)(O.a,{}),htmlType:"submit",children:h?"Guardar "+a.actor.name:"Agregar "+a.actor.name})})})})]})]})};var F=e=>{let{notarialact:a,actor:t,form:s,iterative:r,flag:c}=e;({})[t.actor._id]=t.actor._id;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(i.a,{children:Object(y.jsx)(l.a,{span:24,className:"centrar margeTituloActor",children:Object(y.jsx)("h2",{className:"titleIngresarInfo actors",children:t.actor.name})})}),Object(y.jsxs)(n.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:8},autoComplete:"off",form:s,children:[Object.keys(a.form).map(((e,s)=>Object(y.jsx)(i.a,{className:"",children:a.form[e].actors[t.actor.name].checked&&!a.form[e].input.validation?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(l.a,{span:24,className:"centrar",children:Object(y.jsx)(C,{formInput:a.form[e].input,actor:t,iterative:r})})}):null},s))),Object.keys(a.form).map(((e,s)=>Object(y.jsx)(i.a,{className:"",children:a.form[e].actors[t.actor.name].checked&&a.form[e].input.validation?Object(y.jsxs)(y.Fragment,{children:[c&&Object(y.jsx)(l.a,{span:24,className:"centrar",children:(c=!1,Object(y.jsx)("p",{className:"notaJuridica",children:"Si es una empresa, por favor diligencia los siguientes datos:"}))}),Object(y.jsx)(l.a,{span:24,className:"centrar",children:Object(y.jsx)(C,{formInput:a.form[e].input,actor:t,iterative:r})})]}):null},s)))]})]})};t(359);a.default=e=>{const[a,t]=Object(s.useState)(),[r,d]=Object(s.useState)(!1),[O,x]=Object(s.useState)(),[f]=n.a.useForm(),{user:g}=Object(s.useContext)(c.a),v=t=>{const s=f.getFieldsValue();let r,c={};Object.keys(s).forEach(((e,a)=>{const t=e.split("_");r?r!==t[1]&&(r=t[1],c[r]={}):(r=t[1],c[r]={}),c[r][t[0]]=s[e]}));var n={...c,...O};N(n)?u.a.post("/api/procedurenotarial",{notarialAct:a._id,actors:n,user:g._id,state:"2"}).then((s=>{t?(e.history.push("/notarialactsteptwo?id="+a._id+"&p="+s.data.id),f.resetFields(),n={}):k()})):j.a.show({type:"error",title:"\xa1Lo sentimos!",message:"No puedes continuar hasta que hayas diligenciado todos los datos que son obligatorios.\nSi no cuentas con ellos y necesitas tiempo para reunirlos, puedes darle clic al bot\xf3n Guardar y cuando tengas los datos podr\xe1s ir a Mis tr\xe1mites y continuar en donde lo dejaste.",btnOk:"Aceptar",fnOk:()=>{},buttonX:!0,fnCancel:()=>{}})},N=e=>{var t,s=[],r=[];let c=0;a.actors.forEach(((e,a)=>{e.iterative||(1,s.push(e.actor._id))})),a.actors.forEach(((e,a)=>{e.iterative&&r.push(e.actor._id)})),s.forEach(((t,s)=>{console.log(e),e[t]&&Object.keys(e[t]).forEach((s=>{void 0!=e[t][s]&&""!=e[t][s]||!a.form[s].input.required||(c+=1)}))})),console.log("fiels",c),r.forEach(((t,s)=>{e[t]&&e[t].forEach((e=>{Object.keys(e).forEach((t=>{void 0!=e[t]&&""!=e[t]||!a.form[t].input.required||(c+=1)}))}))})),t=0==c;let n=0;return s.forEach(((t,s)=>{e[t]&&Object.keys(e[t]).forEach((s=>{let r=a.form[s].input.minCant||0,c=a.form[s].input.maxCant||0;void 0!=e[t][s]&&""!=e[t][s]||a.form[s].input.required?void 0!=e[t][s]&&""!=e[t][s]||!a.form[s].input.required?e[t][s].length>=r&&e[t][s].length<=c?n+=0:n+=1:r>0&&(n+=1):n+=0}))})),r.forEach(((t,s)=>{e[t]&&e[t].forEach((e=>{Object.keys(e).forEach((t=>{let s=a.form[t].input.minCant||0,r=a.form[t].input.maxCant||0;void 0!=e[t]&&""!=e[t]||a.form[t].input.required?void 0!=e[t]&&""!=e[t]||!a.form[t].input.required?e[t].length>=s&&e[t].length<=r?n+=0:n+=1:s>0&&(n+=1):n+=0}))}))})),console.log(n),t&&0==n},k=()=>{j.a.show({type:"warning",title:"",message:"Toda la informaci\xf3n que has ingresado quedar\xe1 guardada para que puedas continuar despu\xe9s. Si necesitas ayuda no dudes en contactarnos.\n\n\xbfSegur@ que deseas guardar y salir?",btnOk:"Confirmar",fnOk:()=>{j.a.show({type:"success",title:"\xa1T\xfa tr\xe1mite ha sido guardado!",message:"Para completar tu solicitud, podr\xe1s ir a la opci\xf3n del men\xfa Mis tr\xe1mites, seleccionar el bot\xf3n Ver de este tr\xe1mite y as\xed podr\xe1s continuar justo en donde lo dejaste.\nRecuerda que tienes 10 d\xedas para completarlo. Despu\xe9s de este tiempo, tu tr\xe1mite ser\xe1 eliminado.\n\nSi tienes alguna duda, activa la ayuda y podr\xe1s chatear con nosotros o si deseas podemos llamarte.",btnOk:"Aceptar",fnOk:()=>{e.history.push("/procedurenotarial")},buttonX:!0,fnCancel:()=>{}})},buttonX:!0,fnCancel:()=>{}})};return Object(s.useEffect)((()=>{(async()=>{let{id:a}=m.a.parse(e.location.search);const s=await u.a.get("/api/notarialact/"+a);200===s.status&&t(s.data)})(),d(!0),setTimeout((()=>{d(!1)}),3e3)}),[]),Object(y.jsxs)(p.a,{loader:r,hasHeaderProfile:!0,visible:!0,classNameMain:"notarialAct",children:[Object(y.jsx)(h.a,{}),a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(i.a,{className:"containerProcedure-info",children:Object(y.jsxs)(l.a,{span:23,className:"categories",children:[Object(y.jsxs)("h3",{className:"title-indicaciones",children:[a.category.name," /"]}),Object(y.jsx)("div",{className:"line-morado"}),Object(y.jsx)("h2",{className:"title-indicaciones",children:a.name}),Object(y.jsxs)("div",{className:"diplayflex",children:[Object(y.jsx)("div",{className:"content-circule",children:Object(y.jsx)("span",{className:"circule-number",children:"1"})}),Object(y.jsx)("h2",{className:"titleIngresarInfo",children:"Ingresa la informaci\xf3n"})]})]})}),Object(y.jsx)("br",{}),Object(y.jsxs)(i.a,{className:"containerDescription",children:[Object(y.jsx)(l.a,{span:1}),Object(y.jsxs)(l.a,{span:22,children:[Object(y.jsx)("p",{className:"containerDescription-description",children:a.description}),a.note&&Object(y.jsx)("p",{className:"containerDescription-description",children:a.note})]})]}),Object(y.jsx)(i.a,{className:"containerForm",children:Object(y.jsxs)(l.a,{span:24,children:[a.actors.map(((e,t)=>Object(y.jsx)(y.Fragment,{children:e.iterative?Object(y.jsx)(q,{notarialact:a,actor:e,setActorsIterative:x,actorsIterative:O,iterative:!0,flag:!0},t):Object(y.jsx)(F,{notarialact:a,actor:e,form:f,iterative:!1,flag:!0},t)}))),Object(y.jsxs)(i.a,{className:"containerButtonFinished",children:[Object(y.jsx)(o.a,{type:"primary",htmlType:"submit",className:"btnSave",icon:Object(y.jsx)(b.a,{}),onClick:()=>v(!1),children:"Guardar y salir"}),Object(y.jsx)(o.a,{type:"primary",htmlType:"submit",className:"btnContinuar",onClick:()=>v(!0),children:"Continuar"})]})]})})]}):null]})}}}]);
//# sourceMappingURL=28.353e92d9.chunk.js.map